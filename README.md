# Описание проекта рекомендательной системы
Придумана условная социальная сеть, со следующим функционалом: можно отправлять друг другу письма, создавать сообщества, аналогичные группам в известных сетях, и в этих сообществах публиковать посты. 

При регистрации пользователи должны заполнять данные по своему профилю, которые хранятся в поднятой postgres database. 

Так же платформа обладает лентой, которую пользователи могут листать и просматривать случайные записи случайных сообществ. Если пост нравится, можно поддержать автора и поставить like.

Все действия пользователей сохраняются, каждая их активность, связанная с просмотром постов, тоже записывается в базу.

В рамках проекта предстоит построить рекомендательный сервис постов в социальной сети

## Задача
* Провести разработку рекомендательного сервиса, который на базе данных о пользователях и постах будет предлагать топ-5 публикаций для пользователя, с большей вероятностью которые юзер лайкнет
* При этом уложиться в рамки требований по метрикам и техническим ограничениям (о них далее)

## Требования по работе рекомендательного сервиса
* Скорость работы сервиса. Среднее время работы одного запроса должно быть не более __~0,5 секунд__. 
* Установлены ограничения по памяти: не больше, чем __~4 гб RAM__ на запуск 
* Установлены ограничения на качество модели: 
	* На 2-м этапе проекта HitRate@5 должен быть больше __0.52__
	* На 3-м этапе проекта HitRate@5 должен быть больше __0.57__

 ## Этапы разработки
1. Подготовка основы сервиса на базе FAST API (виртуальное окружение, установка пакетов, pydentic схема)
2. Выгрузка данных, EDA, использование моделей классического машинного обучения, настройка сервиса
3. Доработка модели и сервиса (используя эмбединги, deep learning)
4. Построение отдельного сервиса для использования A/B тестирования (для примера будут взяты модели из 2-го и 3-го этапов разработки)

## Доступное окружение для сервиса (для чекера проекта)
```
fastapi==0.75.1
pandas==1.4.2
sqlalchemy==1.4.35
requests==2.27.1
catboost==1.0.6
numpy==1.22.4
pydantic==1.9.1
scikit_learn==1.1.1
lightgbm==2.0.3
xgboost==1.6.1
psycopg2-binary==2.9.3
uvicorn==0.16.0
category-encoders==2.5.0
loguru==0.6.0
implicit==0.5.2
lightfm==1.16
```
## Описание данных
**Таблица user_data**
Cодержит информацию о всех пользователях соц.сети
|Field name|Overview|
|-|-|
|age|Возраст пользователя (в профиле)|
|city|Город пользователя (в профиле)|
|country|Страна пользователя (в профиле)|
|exp_group|Экспериментальная группа: некоторая зашифрованная категория|
|gender|Пол пользователя|
|user_id|Уникальный идентификатор пользователя|
|os|Операционная система устройства, с которого происходит пользование соц.сетью|
|source|Пришел ли пользователь в приложение с органического трафика или с рекламы|

**Таблица post_text_df**
Содержит информацию о постах
|Field name|Overview|
|-|-|
|id|Уникальный идентификатор поста|
|text|Текстовое содержание поста|
|topic|Основная тематика|

**Таблица feed_data**
Содержит историю о просмотренных постах для каждого юзера
|Field name|Overview|
|-|-|
|timestamp|Время, когда был произведен просмотр|
|user_id|id пользователя, который совершил просмотр|
|post_id|id просмотренного поста|
|action|Тип действия: просмотр или лайк|
|target|1 у просмотров, если почти сразу после просмотра был совершен лайк, иначе 0. У действий like пропущенное значение.|

## Описание основных файлов из проекта
* "app.py" - основной сервис для 1-3 этапов
* "check_eda_learn.ipynb" - Jupiter Notebook с проверкой данных, EDA, обучению моделей для 2-3 этапов
* "emb-posts-pretrain.ipynb" - Jupiter Notebook с подготовкой эмбедингов постов для 3-го этапа
* "app_ab.py" - сервис для использования a/b тестов
